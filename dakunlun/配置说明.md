# 大昆仑项目配置指南

## 项目简介

这是一个基于Go语言开发的游戏后端服务项目，使用了Gin框架、MySQL数据库、Redis缓存等技术栈。

## 环境要求

- Go 1.19+
- MySQL 5.7+
- Redis 6.0+

## 配置说明

### 1. 数据库配置

项目使用MySQL作为主数据库，需要在配置文件中设置数据库连接信息：

```toml
mysql_host = '127.0.0.1'
mysql_port = 3306
mysql_user = 'your_username'
mysql_password = 'YOUR_MYSQL_PASSWORD'  # 请替换为实际密码
mysql_db = 'dakunlun'
```

### 2. Redis配置

项目使用Redis作为缓存和会话存储：

```toml
redis_uri = '127.0.0.1:6379'
redis_password = 'YOUR_REDIS_PASSWORD'  # 请替换为实际密码
redis_db = '1'
```

### 3. 第三方服务配置

#### 钉钉机器人配置

在 `app/util/alert.go` 文件中配置钉钉机器人AccessToken：

```go
ding := dinghook.Ding{AccessToken: "YOUR_DINGTALK_ACCESS_TOKEN"}
```

## 部署步骤

### 1. 克隆项目

```bash
git clone <repository-url>
cd dakunlun
```

### 2. 安装依赖

```bash
go mod download
```

### 3. 配置环境

根据部署环境选择对应的配置文件：

- 开发环境：`configs/dev.toml`
- 测试环境：`configs/test.toml`
- 生产环境：复制 `configs/base.toml` 并修改相应配置

### 4. 数据库初始化

执行SQL脚本初始化数据库：

```bash
mysql -u your_username -p dakunlun < cmd/dakunlun.sql
```

### 5. 启动服务

```bash
# 开发环境
go run cmd/server/main.go

# 生产环境
go build -o server cmd/server/main.go
./server
```

## 安全注意事项

1. **密码安全**：所有密码和token都已脱敏，部署时请使用强密码
2. **网络安全**：生产环境建议使用HTTPS和防火墙
3. **日志安全**：定期清理日志文件，避免敏感信息泄露
4. **权限控制**：数据库用户应使用最小权限原则

## 常见问题

### Q: 如何生成新的token？
A: 根据对应的第三方服务文档生成新的API token。

### Q: 数据库连接失败怎么办？
A: 检查数据库服务是否启动，用户名密码是否正确，网络是否可达。

### Q: Redis连接失败怎么办？
A: 检查Redis服务是否启动，密码是否正确，端口是否开放。

## 联系方式

如有问题请联系项目维护者。